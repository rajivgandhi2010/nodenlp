"use strict";
/**
 * Created by user on 2018/4/19/019.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const synonym_pangu_1 = require("./synonym.pangu");
/**
 * 請注意 這與原版 node-segment 的格式不同
 *
 * 原版為一對一 => 錯字,正字
 * 這裡為一對多 並且順序與原版相反 => 正字,錯字,...以,分隔更多字
 */
class TableDictSynonym extends synonym_pangu_1.TableDictSynonymPanGu {
    constructor(type = TableDictSynonym.type, options = {}, ...argv) {
        super(type, options, ...argv);
        /**
         * 緩存主KEY
         */
        this.TABLE2 = {};
    }
    add(data, skipExists) {
        if (!Array.isArray(data) || data.length < 2) {
            throw new TypeError(JSON.stringify(data));
        }
        let w = this._trim(data.shift());
        if (!w) {
            throw new TypeError(JSON.stringify(data));
        }
        let self = this;
        self.TABLE2[w] = self.TABLE2[w] || [];
        data.forEach(function (bw, index) {
            bw = self._trim(bw);
            if (!bw) {
                if (index == 0) {
                    throw new TypeError();
                }
                return;
            }
            if (skipExists && self.exists(bw) || bw in self.TABLE2) {
                return;
            }
            self.TABLE2[w].push(bw);
            self._add(bw, w);
            skipExists = true;
        });
        return this;
    }
}
exports.TableDictSynonym = TableDictSynonym;
exports.default = TableDictSynonym;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3lub255bS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInN5bm9ueW0udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOztHQUVHOztBQU9ILG1EQUF3RDtBQVV4RDs7Ozs7R0FLRztBQUNILE1BQWEsZ0JBQWlCLFNBQVEscUNBQXFCO0lBRzFELFlBQVksT0FBZSxnQkFBZ0IsQ0FBQyxJQUFJLEVBQUUsVUFBb0IsRUFBRSxFQUFFLEdBQUcsSUFBSTtRQUVoRixLQUFLLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFBO1FBRzlCOztXQUVHO1FBQ0ksV0FBTSxHQUFvQixFQUFFLENBQUM7SUFMcEMsQ0FBQztJQU9ELEdBQUcsQ0FBQyxJQUE0QixFQUFFLFVBQW9CO1FBRXJELElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUMzQztZQUNDLE1BQU0sSUFBSSxTQUFTLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1NBQzFDO1FBRUQsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQztRQUVqQyxJQUFJLENBQUMsQ0FBQyxFQUNOO1lBQ0MsTUFBTSxJQUFJLFNBQVMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7U0FDMUM7UUFFRCxJQUFJLElBQUksR0FBRyxJQUFJLENBQUM7UUFFaEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUV0QyxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRSxFQUFFLEtBQUs7WUFFL0IsRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUM7WUFFcEIsSUFBSSxDQUFDLEVBQUUsRUFDUDtnQkFDQyxJQUFJLEtBQUssSUFBSSxDQUFDLEVBQ2Q7b0JBQ0MsTUFBTSxJQUFJLFNBQVMsRUFBRSxDQUFDO2lCQUN0QjtnQkFFRCxPQUFPO2FBQ1A7WUFFRCxJQUFJLFVBQVUsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUN0RDtnQkFDQyxPQUFPO2FBQ1A7WUFFRCxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUN4QixJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUVqQixVQUFVLEdBQUcsSUFBSSxDQUFDO1FBQ25CLENBQUMsQ0FBQyxDQUFDO1FBRUgsT0FBTyxJQUFJLENBQUM7SUFDYixDQUFDO0NBRUQ7QUEzREQsNENBMkRDO0FBRUQsa0JBQWUsZ0JBQWdCLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgdXNlciBvbiAyMDE4LzQvMTkvMDE5LlxuICovXG5cbmltcG9ydCB7IElESUNUX1NZTk9OWU0sIElXb3JkIH0gZnJvbSAnLi4vU2VnbWVudCc7XG5pbXBvcnQgeyBJRGljdFJvdyB9IGZyb20gJ3NlZ21lbnQtZGljdC9saWIvbG9hZGVyL3NlZ21lbnQnO1xuaW1wb3J0IENqa0NvbnYgZnJvbSAnY2prLWNvbnYnO1xuaW1wb3J0IHsgdGV4dF9saXN0IH0gZnJvbSAnLi4vdXRpbC9jamsnO1xuaW1wb3J0IEFic3RyYWN0VGFibGVEaWN0Q29yZSwgeyBJRElDVCwgSURJQ1QyLCBJT3B0aW9ucyB9IGZyb20gJy4vY29yZSc7XG5pbXBvcnQgeyBUYWJsZURpY3RTeW5vbnltUGFuR3UgfSBmcm9tICcuL3N5bm9ueW0ucGFuZ3UnO1xuaW1wb3J0IFVTdHJpbmcgZnJvbSAndW5pLXN0cmluZyc7XG5cbmV4cG9ydCB0eXBlIEFycmF5VHdvT3JNb3JlPFQ+ID0ge1xuXHQwOiBULFxuXHQxOiBULFxuXHRbbjogbnVtYmVyXTogVCxcblx0bGVuZ3RoOiBudW1iZXIsXG59XG5cbi8qKlxuICog6KuL5rOo5oSPIOmAmeiIh+WOn+eJiCBub2RlLXNlZ21lbnQg55qE5qC85byP5LiN5ZCMXG4gKlxuICog5Y6f54mI54K65LiA5bCN5LiAID0+IOmMr+WtlyzmraPlrZdcbiAqIOmAmeijoeeCuuS4gOWwjeWkmiDkuKbkuJTpoIbluo/oiIfljp/niYjnm7jlj40gPT4g5q2j5a2XLOmMr+WtlywuLi7ku6Us5YiG6ZqU5pu05aSa5a2XXG4gKi9cbmV4cG9ydCBjbGFzcyBUYWJsZURpY3RTeW5vbnltIGV4dGVuZHMgVGFibGVEaWN0U3lub255bVBhbkd1XG57XG5cblx0Y29uc3RydWN0b3IodHlwZTogc3RyaW5nID0gVGFibGVEaWN0U3lub255bS50eXBlLCBvcHRpb25zOiBJT3B0aW9ucyA9IHt9LCAuLi5hcmd2KVxuXHR7XG5cdFx0c3VwZXIodHlwZSwgb3B0aW9ucywgLi4uYXJndilcblx0fVxuXG5cdC8qKlxuXHQgKiDnt6nlrZjkuLtLRVlcblx0ICovXG5cdHB1YmxpYyBUQUJMRTI6IElESUNUPHN0cmluZ1tdPiA9IHt9O1xuXG5cdGFkZChkYXRhOiBBcnJheVR3b09yTW9yZTxzdHJpbmc+LCBza2lwRXhpc3RzPzogYm9vbGVhbilcblx0e1xuXHRcdGlmICghQXJyYXkuaXNBcnJheShkYXRhKSB8fCBkYXRhLmxlbmd0aCA8IDIpXG5cdFx0e1xuXHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcihKU09OLnN0cmluZ2lmeShkYXRhKSk7XG5cdFx0fVxuXG5cdFx0bGV0IHcgPSB0aGlzLl90cmltKGRhdGEuc2hpZnQoKSk7XG5cblx0XHRpZiAoIXcpXG5cdFx0e1xuXHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcihKU09OLnN0cmluZ2lmeShkYXRhKSk7XG5cdFx0fVxuXG5cdFx0bGV0IHNlbGYgPSB0aGlzO1xuXG5cdFx0c2VsZi5UQUJMRTJbd10gPSBzZWxmLlRBQkxFMlt3XSB8fCBbXTtcblxuXHRcdGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoYncsIGluZGV4KVxuXHRcdHtcblx0XHRcdGJ3ID0gc2VsZi5fdHJpbShidyk7XG5cblx0XHRcdGlmICghYncpXG5cdFx0XHR7XG5cdFx0XHRcdGlmIChpbmRleCA9PSAwKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcigpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoc2tpcEV4aXN0cyAmJiBzZWxmLmV4aXN0cyhidykgfHwgYncgaW4gc2VsZi5UQUJMRTIpXG5cdFx0XHR7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0c2VsZi5UQUJMRTJbd10ucHVzaChidyk7XG5cdFx0XHRzZWxmLl9hZGQoYncsIHcpO1xuXG5cdFx0XHRza2lwRXhpc3RzID0gdHJ1ZTtcblx0XHR9KTtcblxuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgVGFibGVEaWN0U3lub255bVxuIl19