"use strict";
/**
 * Created by user on 2018/2/21/021.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const debug_1 = require("../util/debug");
class SModule {
    /**
     * @param {Segment} segment 分词接口
     */
    constructor(segment) {
        this.segment = segment;
    }
    _doMethod(fn, target, mods, ...argv) {
        mods.forEach(function (mod) {
            // @ts-ignore
            if (typeof mod._cache == 'function') {
                // @ts-ignore
                mod._cache();
            }
            target = mod[fn](target, ...argv);
        });
        return target;
    }
}
exports.SModule = SModule;
class SubSModule {
    constructor(type, segment, ...argv) {
        if (type) {
            this.type = type;
        }
        if (!this.type) {
            throw new Error();
        }
        if (segment) {
            this.init(segment, ...argv);
            this.inited = true;
        }
    }
    static init(segment, ...argv) {
        // @ts-ignore
        return this._init(this, segment, ...argv);
    }
    static _init(libThis, segment, ...argv) {
        if (!libThis.type) {
            throw new Error();
        }
        let mod = new libThis(libThis.type, segment, ...argv);
        if (!mod.inited) {
            mod.init(segment, ...argv);
            mod.inited = true;
        }
        // @ts-ignore
        return mod;
    }
    init(segment, ...argv) {
        this.segment = segment;
        this.inited = true;
        //this._cache();
        return this;
    }
    _cache(...argv) {
        this._POSTAG = this.segment.POSTAG;
    }
    /**
     * 回傳最簡版的 IWord { w, p, f, s }
     */
    createRawToken(data, ow, attr) {
        // @ts-ignore
        ow = ow || {};
        let nw = {
            w: typeof data.w == 'undefined' ? ow.w : data.w,
            p: typeof data.p == 'undefined' ? ow.p : data.p,
            f: typeof data.f == 'undefined' ? ow.f : data.f,
            s: typeof data.s == 'undefined' ? ow.s : data.s,
        };
        if (attr) {
            this.debugToken(nw, attr);
        }
        return nw;
    }
    createToken(data, skipCheck, attr) {
        let TABLE = this._TABLE;
        if (!skipCheck && TABLE && !(data.w in TABLE)) {
            this.debugToken(data, {
                autoCreate: true,
            });
        }
        // 自動將模組名稱血入 debug 資訊
        if (this.name) {
            attr = Object.assign(attr || {});
            if (!(this.name in attr)) {
                attr[this.name] = true;
            }
        }
        if (attr) {
            this.debugToken(data, attr);
        }
        return data;
    }
    sliceToken(words, pos, len, data, skipCheck, attr) {
        words.splice(pos, len, this.createToken(data, skipCheck, attr));
        return words;
    }
    debugToken(data, attr, returnToken, ...argv) {
        return debug_1.debugToken(data, attr, returnToken, ...argv);
    }
}
exports.SubSModule = SubSModule;
exports.default = exports;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibW9kLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7R0FFRzs7QUFLSCx5Q0FBMEM7QUFJMUMsTUFBYSxPQUFPO0lBS25COztPQUVHO0lBQ0gsWUFBWSxPQUFnQjtRQUUzQixJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztJQUN4QixDQUFDO0lBRVMsU0FBUyxDQUF5QyxFQUFVLEVBQUUsTUFBVyxFQUFFLElBQVMsRUFBRSxHQUFHLElBQUk7UUFFdEcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLEdBQUc7WUFFekIsYUFBYTtZQUNiLElBQUksT0FBTyxHQUFHLENBQUMsTUFBTSxJQUFJLFVBQVUsRUFDbkM7Z0JBQ0MsYUFBYTtnQkFDYixHQUFHLENBQUMsTUFBTSxFQUFFLENBQUM7YUFDYjtZQUVELE1BQU0sR0FBRyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUM7UUFDbkMsQ0FBQyxDQUFDLENBQUM7UUFDSCxPQUFPLE1BQU0sQ0FBQztJQUNmLENBQUM7Q0FDRDtBQTVCRCwwQkE0QkM7QUFFRCxNQUFhLFVBQVU7SUFpQnRCLFlBQVksSUFBbUIsRUFBRSxPQUFpQixFQUFFLEdBQUcsSUFBSTtRQUUxRCxJQUFJLElBQUksRUFDUjtZQUNDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1NBQ2pCO1FBRUQsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQ2Q7WUFDQyxNQUFNLElBQUksS0FBSyxFQUFFLENBQUE7U0FDakI7UUFFRCxJQUFJLE9BQU8sRUFDWDtZQUNDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUM7WUFDNUIsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7U0FDbkI7SUFDRixDQUFDO0lBRU0sTUFBTSxDQUFDLElBQUksQ0FBb0MsT0FBZ0IsRUFBRSxHQUFH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LElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDO2FBQ3ZCO1NBQ0Q7UUFFRCxJQUFJLElBQUksRUFDUjtZQUNDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1NBQzVCO1FBRUQsT0FBTyxJQUFJLENBQUM7SUFDYixDQUFDO0lBRVMsVUFBVSxDQUE0QyxLQUFVLEVBQUUsR0FBVyxFQUFFLEdBQVcsRUFBRSxJQUFPLEVBQUUsU0FBbUIsRUFBRSxJQUF5QjtRQUU1SixLQUFLLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsU0FBUyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7UUFFaEUsT0FBTyxLQUFLLENBQUM7SUFDZCxDQUFDO0lBRVMsVUFBVSxDQUFpRCxJQUFPLEVBQUUsSUFBeUIsRUFBRSxXQUFrQixFQUFFLEdBQUcsSUFBSTtRQUVuSSxPQUFPLGtCQUFVLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQztJQUNyRCxDQUFDO0NBQ0Q7QUE1SUQsZ0NBNElDO0FBcUNELGtCQUFlLE9BQWlDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgdXNlciBvbiAyMDE4LzIvMjEvMDIxLlxuICovXG5cbmltcG9ydCB7IFBPU1RBRyB9IGZyb20gJy4uL1BPU1RBRyc7XG5pbXBvcnQgeyBJRElDVCwgSURJQ1RfQkxBQ0tMSVNULCBJV29yZCwgU2VnbWVudCB9IGZyb20gJy4uL1NlZ21lbnQnO1xuaW1wb3J0IHsgSVdvcmREZWJ1ZywgSVdvcmREZWJ1Z0luZm8gfSBmcm9tICcuLi91dGlsL2luZGV4JztcbmltcG9ydCB7IGRlYnVnVG9rZW4gfSBmcm9tICcuLi91dGlsL2RlYnVnJ1xuXG5leHBvcnQgdHlwZSBJU01vZHVsZVR5cGUgPSAnb3B0aW1pemVyJyB8ICd0b2tlbml6ZXInIHwgc3RyaW5nO1xuXG5leHBvcnQgY2xhc3MgU01vZHVsZSBpbXBsZW1lbnRzIElTTW9kdWxlXG57XG5cdHR5cGU/OiBJU01vZHVsZVR5cGU7XG5cdHNlZ21lbnQ6IFNlZ21lbnQ7XG5cblx0LyoqXG5cdCAqIEBwYXJhbSB7U2VnbWVudH0gc2VnbWVudCDliIbor43mjqXlj6Ncblx0ICovXG5cdGNvbnN0cnVjdG9yKHNlZ21lbnQ6IFNlZ21lbnQpXG5cdHtcblx0XHR0aGlzLnNlZ21lbnQgPSBzZWdtZW50O1xuXHR9XG5cblx0cHJvdGVjdGVkIF9kb01ldGhvZDxTIGV4dGVuZHMgSVdvcmQsIFQgZXh0ZW5kcyBJU3ViU01vZHVsZT4oZm46IHN0cmluZywgdGFyZ2V0OiBTW10sIG1vZHM6IFRbXSwgLi4uYXJndilcblx0e1xuXHRcdG1vZHMuZm9yRWFjaChmdW5jdGlvbiAobW9kKVxuXHRcdHtcblx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdGlmICh0eXBlb2YgbW9kLl9jYWNoZSA9PSAnZnVuY3Rpb24nKVxuXHRcdFx0e1xuXHRcdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRcdG1vZC5fY2FjaGUoKTtcblx0XHRcdH1cblxuXHRcdFx0dGFyZ2V0ID0gbW9kW2ZuXSh0YXJnZXQsIC4uLmFyZ3YpO1xuXHRcdH0pO1xuXHRcdHJldHVybiB0YXJnZXQ7XG5cdH1cbn1cblxuZXhwb3J0IGNsYXNzIFN1YlNNb2R1bGUgaW1wbGVtZW50cyBJU3ViU01vZHVsZVxue1xuXHRwdWJsaWMgc3RhdGljIHR5cGU6IElTTW9kdWxlVHlwZTtcblx0cHVibGljIHR5cGU6IElTTW9kdWxlVHlwZTtcblx0c2VnbWVudDogU2VnbWVudDtcblxuXHRwcmlvcml0eT86IG51bWJlcjtcblxuXHRpbml0ZWQ/OiBib29sZWFuO1xuXG5cdHB1YmxpYyBuYW1lOiBzdHJpbmc7XG5cblx0cHJvdGVjdGVkIF9UQUJMRT87XG5cdHByb3RlY3RlZCBfUE9TVEFHPzogdHlwZW9mIFBPU1RBRztcblxuXHRwcm90ZWN0ZWQgX0JMQUNLTElTVD86IElESUNUX0JMQUNLTElTVDtcblxuXHRjb25zdHJ1Y3Rvcih0eXBlPzogSVNNb2R1bGVUeXBlLCBzZWdtZW50PzogU2VnbWVudCwgLi4uYXJndilcblx0e1xuXHRcdGlmICh0eXBlKVxuXHRcdHtcblx0XHRcdHRoaXMudHlwZSA9IHR5cGU7XG5cdFx0fVxuXG5cdFx0aWYgKCF0aGlzLnR5cGUpXG5cdFx0e1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKClcblx0XHR9XG5cblx0XHRpZiAoc2VnbWVudClcblx0XHR7XG5cdFx0XHR0aGlzLmluaXQoc2VnbWVudCwgLi4uYXJndik7XG5cdFx0XHR0aGlzLmluaXRlZCA9IHRydWU7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIHN0YXRpYyBpbml0PFQgZXh0ZW5kcyBTdWJTTW9kdWxlID0gU3ViU01vZHVsZT4oc2VnbWVudDogU2VnbWVudCwgLi4uYXJndik6IFRcblx0e1xuXHRcdC8vIEB0cy1pZ25vcmVcblx0XHRyZXR1cm4gdGhpcy5faW5pdCh0aGlzLCBzZWdtZW50LCAuLi5hcmd2KTtcblx0fVxuXG5cdHByb3RlY3RlZCBzdGF0aWMgX2luaXQ8VCBleHRlbmRzIFN1YlNNb2R1bGU+KGxpYlRoaXM6IElNb2R1bGVTdGF0aWM8VD4sIHNlZ21lbnQ6IFNlZ21lbnQsIC4uLmFyZ3YpOiBUXG5cdHtcblx0XHRpZiAoIWxpYlRoaXMudHlwZSlcblx0XHR7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoKVxuXHRcdH1cblxuXHRcdGxldCBtb2QgPSBuZXcgbGliVGhpcyhsaWJUaGlzLnR5cGUsIHNlZ21lbnQsIC4uLmFyZ3YpO1xuXG5cdFx0aWYgKCFtb2QuaW5pdGVkKVxuXHRcdHtcblx0XHRcdG1vZC5pbml0KHNlZ21lbnQsIC4uLmFyZ3YpO1xuXHRcdFx0bW9kLmluaXRlZCA9IHRydWU7XG5cdFx0fVxuXG5cdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdHJldHVybiBtb2Q7XG5cdH1cblxuXHRwdWJsaWMgaW5pdChzZWdtZW50OiBTZWdtZW50LCAuLi5hcmd2KVxuXHR7XG5cdFx0dGhpcy5zZWdtZW50ID0gc2VnbWVudDtcblx0XHR0aGlzLmluaXRlZCA9IHRydWU7XG5cblx0XHQvL3RoaXMuX2NhY2hlKCk7XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXG5cdHByb3RlY3RlZCBfY2FjaGUoLi4uYXJndilcblx0e1xuXHRcdHRoaXMuX1BPU1RBRyA9IHRoaXMuc2VnbWVudC5QT1NUQUc7XG5cdH1cblxuXHQvKipcblx0ICog5Zue5YKz5pyA57Ch54mI55qEIElXb3JkIHsgdywgcCwgZiwgcyB9XG5cdCAqL1xuXHRwcm90ZWN0ZWQgY3JlYXRlUmF3VG9rZW48VCBleHRlbmRzIElXb3JkLCBVIGV4dGVuZHMgSVdvcmREZWJ1Z0luZm8gPSBJV29yZERlYnVnSW5mbz4oZGF0YTogVCwgb3c/OiBQYXJ0aWFsPFQgJiBJV29yZD4sIGF0dHI/OiBVICYgSVdvcmREZWJ1Z0luZm8pXG5cdHtcblx0XHQvLyBAdHMtaWdub3JlXG5cdFx0b3cgPSBvdyB8fCB7fTtcblxuXHRcdGxldCBudyA9IHtcblx0XHRcdHc6IHR5cGVvZiBkYXRhLncgPT0gJ3VuZGVmaW5lZCcgPyBvdy53IDogZGF0YS53LFxuXHRcdFx0cDogdHlwZW9mIGRhdGEucCA9PSAndW5kZWZpbmVkJyA/IG93LnAgOiBkYXRhLnAsXG5cdFx0XHRmOiB0eXBlb2YgZGF0YS5mID09ICd1bmRlZmluZWQnID8gb3cuZiA6IGRhdGEuZixcblx0XHRcdHM6IHR5cGVvZiBkYXRhLnMgPT0gJ3VuZGVmaW5lZCcgPyBvdy5zIDogZGF0YS5zLFxuXHRcdH0gYXMgVDtcblxuXHRcdGlmIChhdHRyKVxuXHRcdHtcblx0XHRcdHRoaXMuZGVidWdUb2tlbihudywgYXR0cik7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG53O1xuXHR9XG5cblx0cHJvdGVjdGVkIGNyZWF0ZVRva2VuPFQgZXh0ZW5kcyBJV29yZCwgVSBleHRlbmRzIElXb3JkRGVidWdJbmZvID0gSVdvcmREZWJ1Z0luZm8+KGRhdGE6IFQsIHNraXBDaGVjaz86IGJvb2xlYW4sIGF0dHI/OiBVICYgSVdvcmREZWJ1Z0luZm8pXG5cdHtcblx0XHRsZXQgVEFCTEUgPSB0aGlzLl9UQUJMRTtcblxuXHRcdGlmICghc2tpcENoZWNrICYmIFRBQkxFICYmICEoZGF0YS53IGluIFRBQkxFKSlcblx0XHR7XG5cdFx0XHR0aGlzLmRlYnVnVG9rZW4oZGF0YSwge1xuXHRcdFx0XHRhdXRvQ3JlYXRlOiB0cnVlLFxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0Ly8g6Ieq5YuV5bCH5qih57WE5ZCN56ix6KGA5YWlIGRlYnVnIOizh+ioilxuXHRcdGlmICh0aGlzLm5hbWUpXG5cdFx0e1xuXHRcdFx0YXR0ciA9IE9iamVjdC5hc3NpZ24oYXR0ciB8fCB7fSk7XG5cblx0XHRcdGlmICghKHRoaXMubmFtZSBpbiBhdHRyKSlcblx0XHRcdHtcblx0XHRcdFx0YXR0clt0aGlzLm5hbWVdID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoYXR0cilcblx0XHR7XG5cdFx0XHR0aGlzLmRlYnVnVG9rZW4oZGF0YSwgYXR0cik7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRhdGE7XG5cdH1cblxuXHRwcm90ZWN0ZWQgc2xpY2VUb2tlbjxUIGV4dGVuZHMgSVdvcmQsIFUgZXh0ZW5kcyBJV29yZERlYnVnSW5mbz4od29yZHM6IFRbXSwgcG9zOiBudW1iZXIsIGxlbjogbnVtYmVyLCBkYXRhOiBULCBza2lwQ2hlY2s/OiBib29sZWFuLCBhdHRyPzogVSAmIElXb3JkRGVidWdJbmZvKVxuXHR7XG5cdFx0d29yZHMuc3BsaWNlKHBvcywgbGVuLCB0aGlzLmNyZWF0ZVRva2VuKGRhdGEsIHNraXBDaGVjaywgYXR0cikpO1xuXG5cdFx0cmV0dXJuIHdvcmRzO1xuXHR9XG5cblx0cHJvdGVjdGVkIGRlYnVnVG9rZW48VCBleHRlbmRzIElXb3JkRGVidWcsIFUgZXh0ZW5kcyBJV29yZERlYnVnSW5mbz4oZGF0YTogVCwgYXR0cj86IFUgJiBJV29yZERlYnVnSW5mbywgcmV0dXJuVG9rZW4/OiB0cnVlLCAuLi5hcmd2KVxuXHR7XG5cdFx0cmV0dXJuIGRlYnVnVG9rZW4oZGF0YSwgYXR0ciwgcmV0dXJuVG9rZW4sIC4uLmFyZ3YpO1xuXHR9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVN1YlNNb2R1bGVNZXRob2Q8VCBleHRlbmRzIElXb3JkLCBVIGV4dGVuZHMgSVdvcmQgPSBUPlxue1xuXHQod29yZHM6IFRbXSwgLi4uYXJndik6IFVbXSxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJU3ViU01vZHVsZUNyZWF0ZTxUIGV4dGVuZHMgU3ViU01vZHVsZSwgUiBleHRlbmRzIFN1YlNNb2R1bGUgPSBTdWJTTW9kdWxlPlxue1xuXHQoc2VnbWVudDogU2VnbWVudCwgLi4uYXJndik6IFQgJiBSLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElTTW9kdWxlXG57XG5cdHR5cGU/OiBJU01vZHVsZVR5cGUsXG5cdHNlZ21lbnQ6IFNlZ21lbnQsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSU1vZHVsZVN0YXRpYzxUIGV4dGVuZHMgSVNNb2R1bGUgfCBTdWJTTW9kdWxlPlxue1xuXHR0eXBlOiBJU01vZHVsZVR5cGU7XG5cblx0bmV3KHR5cGU/OiBJU01vZHVsZVR5cGUsIHNlZ21lbnQ/OiBTZWdtZW50LCAuLi5hcmd2KTogVCxcblxuXHRpbml0KHNlZ21lbnQ6IFNlZ21lbnQsIC4uLmFyZ3YpOiBULFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElTdWJTTW9kdWxlXG57XG5cdHR5cGU6IElTTW9kdWxlVHlwZSxcblx0c2VnbWVudDogU2VnbWVudCxcblxuXHRwcmlvcml0eT86IG51bWJlcjtcblxuXHRpbml0KHNlZ21lbnQ6IFNlZ21lbnQsIC4uLmFyZ3YpOiBJU3ViU01vZHVsZSxcbn1cblxuZXhwb3J0IGRlZmF1bHQgZXhwb3J0cyBhcyB0eXBlb2YgaW1wb3J0KCcuL21vZCcpO1xuIl19